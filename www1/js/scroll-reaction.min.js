/**
 * scroll-reaction 1.3.1 by Tim-Patrick Matthes
 * Performant, dependency free and fully customizable scroll effects
 * Learn more: https://github.com/tpmatthes/scroll-reaction
 * License: MIT
 * 
 * Bundled with smooth scroll polyfill:
 * https://github.com/iamdustan/smoothscroll
 */

!function(t,o){"object"==typeof exports&&"undefined"!=typeof module?module.exports=o():"function"==typeof define&&define.amd?define(o):t.ScrollReaction=o()}(this,function(){"use strict";function t(t,o,e,i){var l,r;return function(){var n=Date.now();i||l&&n<l+e?(clearTimeout(r),r=setTimeout(function(){l=n,t.call(o)},e)):(l=n,t.call(o))}}function o(o){var e=this,l=[],r={},n=0,s=null,c=[],a={};for(var f in i)a[f]=o&&f in o?o[f]:i[f];var u="auto"==a.smoothScroll&&"scrollBehavior"in document.documentElement.style;this.position=0,this.status=0,this.init=function(){this.refresh(),window.addEventListener("resize",t(this.update,this,200,!0)),window.addEventListener("orientationchange",t(this.update,this,200,!0)),window.addEventListener("scroll",t(this.update,this,a.throttleDelay,!1))},this.refresh=function(){var t=document.querySelectorAll("["+a.attribute+"]");if(t.length>0){l=[],r={};for(var o=t.length-1;o>=0;o--){var e=t[o].getAttribute("href"),i=e&&0==e.indexOf("#")?e.replace("#",""):"",c=i||t[o].getAttribute(a.attribute),f=c?document.getElementById(c):null;!1===a.smoothScroll||!i&&"#"!=e||t[o].addEventListener("click",d),f&&(r[c]={element:f,active:!1},l.push({element:t[o],emitterId:c}))}}a.offsetFrom?s=document.querySelector(a.offsetFrom):n=a.offset,this.update()},this.update=function(){var t=document.body.clientHeight-window.innerHeight,o=t-a.windowBottomOffset,e={id:null,position:-1};if(this.position=window.scrollY,this.status=Math.min(this.position/t*100,100),this.emit("update"),a.attributeCurrent){s&&(n=s.offsetHeight+a.offset);for(var i in r){var c=Math.max(r[i].element.getBoundingClientRect().top+this.position-n,0);(this.position>=c||this.position>=o)&&c>=e.position?(r[i].active=!0,e.id&&c!=e.position&&(r[e.id].active=!1),e.id=i,e.position=c):a.rewind&&(r[i].active=!1)}for(var f in l){var u=r[l[f].emitterId],d=l[f];u.active?d.element.setAttribute(a.attributeCurrent,""):d.element.removeAttribute(a.attributeCurrent)}}},this.scrollTo=function(t){var o,e=t?document.getElementById(t):null,i=0;e&&(s&&(n=s.offsetHeight+a.offset),i=e.getBoundingClientRect().top+this.position-n+1,e.focus()),window.history.replaceState&&(o=window.location.href.replace(window.location.hash,""),window.history.replaceState(null,null,t?"#"+t:o)),u||!0===a.smoothScroll?window.scrollTo({top:i,left:0,behavior:"smooth"}):window.scrollTo(0,i)};var d=function(t){var o=this.getAttribute("href").replace("#","");t.preventDefault(),e.emit("click"),e.scrollTo(o)};this.on=function(t,o){"function"==typeof o&&(c.push({name:t,callback:o}),"update"==t&&o.call(this))},this.emit=function(t){for(var o=0;o<c.length;o++)c[o].name===t&&c[o].callback.call(this)},this.init()}var e=function(t,o){return o={exports:{}},t(o,o.exports),o.exports}(function(t,o){!function(){function o(){function t(t,o){this.scrollLeft=t,this.scrollTop=o}function o(t){return.5*(1-Math.cos(Math.PI*t))}function e(t){if(null===t||"object"!=typeof t||void 0===t.behavior||"auto"===t.behavior||"instant"===t.behavior)return!0;if("object"==typeof t&&"smooth"===t.behavior)return!1;throw new TypeError("behavior member of ScrollOptions "+t.behavior+" is not a valid value for enumeration ScrollBehavior.")}function i(t,o){return"Y"===o?t.clientHeight+v<t.scrollHeight:"X"===o?t.clientWidth+v<t.scrollWidth:void 0}function l(t,o){var e=a.getComputedStyle(t,null)["overflow"+o];return"auto"===e||"scroll"===e}function r(t){var o=i(t,"Y")&&l(t,"Y"),e=i(t,"X")&&l(t,"X");return o||e}function n(t){var o;do{o=(t=t.parentNode)===f.body}while(!1===o&&!1===r(t));return o=null,t}function s(t){var e,i,l,r=(p()-t.startTime)/d;e=o(r=r>1?1:r),i=t.startX+(t.x-t.startX)*e,l=t.startY+(t.y-t.startY)*e,t.method.call(t.scrollable,i,l),i===t.x&&l===t.y||a.requestAnimationFrame(s.bind(a,t))}function c(o,e,i){var l,r,n,c,u=p();o===f.body?(l=a,r=a.scrollX||a.pageXOffset,n=a.scrollY||a.pageYOffset,c=h.scroll):(l=o,r=o.scrollLeft,n=o.scrollTop,c=t),s({scrollable:l,method:c,startTime:u,startX:r,startY:n,x:e,y:i})}var a=window,f=document;if(!("scrollBehavior"in f.documentElement.style&&!0!==a.__forceSmoothScrollPolyfill__)){var u=a.HTMLElement||a.Element,d=468,h={scroll:a.scroll||a.scrollTo,scrollBy:a.scrollBy,elementScroll:u.prototype.scroll||t,scrollIntoView:u.prototype.scrollIntoView},p=a.performance&&a.performance.now?a.performance.now.bind(a.performance):Date.now,v=function(t){var o=["MSIE ","Trident/","Edge/"];return new RegExp(o.join("|")).test(t)}(a.navigator.userAgent)?1:0;a.scroll=a.scrollTo=function(){if(void 0!==arguments[0])return!0===e(arguments[0])?void h.scroll.call(a,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:a.scrollX||a.pageXOffset,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:a.scrollY||a.pageYOffset):void c.call(a,f.body,void 0!==arguments[0].left?~~arguments[0].left:a.scrollX||a.pageXOffset,void 0!==arguments[0].top?~~arguments[0].top:a.scrollY||a.pageYOffset)},a.scrollBy=function(){if(void 0!==arguments[0])return e(arguments[0])?void h.scrollBy.call(a,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:0,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:0):void c.call(a,f.body,~~arguments[0].left+(a.scrollX||a.pageXOffset),~~arguments[0].top+(a.scrollY||a.pageYOffset))},u.prototype.scroll=u.prototype.scrollTo=function(){if(void 0!==arguments[0]){if(!0===e(arguments[0])){if("number"==typeof arguments[0]&&void 0===arguments[1])throw new SyntaxError("Value could not be converted");return void h.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left:"object"!=typeof arguments[0]?~~arguments[0]:this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top:void 0!==arguments[1]?~~arguments[1]:this.scrollTop)}var t=arguments[0].left,o=arguments[0].top;c.call(this,this,void 0===t?this.scrollLeft:~~t,void 0===o?this.scrollTop:~~o)}},u.prototype.scrollBy=function(){if(void 0!==arguments[0])return!0===e(arguments[0])?void h.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop):void this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior})},u.prototype.scrollIntoView=function(){if(!0===e(arguments[0]))return void h.scrollIntoView.call(this,void 0===arguments[0]||arguments[0]);var t=n(this),o=t.getBoundingClientRect(),i=this.getBoundingClientRect();t!==f.body?(c.call(this,t,t.scrollLeft+i.left-o.left,t.scrollTop+i.top-o.top),"fixed"!==a.getComputedStyle(t).position&&a.scrollBy({left:o.left,top:o.top,behavior:"smooth"})):a.scrollBy({left:i.left,top:i.top,behavior:"smooth"})}}}t.exports={polyfill:o}}()}),i=(e.polyfill,{attribute:"data-scroll-reaction",attributeCurrent:"data-scroll-active",offset:5,offsetFrom:"",rewind:!0,smoothScroll:"auto",throttleDelay:100,windowBottomOffset:20});return e.polyfill(),i.smoothScroll=!0,o});
